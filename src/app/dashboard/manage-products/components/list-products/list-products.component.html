<div class="container-fluid">
  <div (click)="addProduct()"  id="addProduct">
    <button class="Btn-add">
      <div class="text">Add Product</div>
      <div class="sign">
        <i class="bi bi-bookmark-plus"></i>
      </div>
    </button>
  </div>

  <form>
    <div class="row">
      <div class="col-md-4">
        <mat-form-field appearance="outline">
          <mat-label>Search</mat-label>
          <input
            matInput
            placeholder="Name Product"
            (keyup)="search($event.target)"
          />
        </mat-form-field>
      </div>
      <div class="col-md-4">
        <mat-form-field appearance="outline">
          <mat-label>Categories</mat-label>
          <mat-select (selectionChange)="selectCategory($event)">
            <mat-option *ngFor="let category of categories" [value]="category">
              {{ category }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-4">
        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input [rangePicker]="picker">
            <input
              matStartDate
              placeholder="Start Date"
              (dateChange)="selectDate($event.target, 'toDate')"
            />
            <input
              matEndDate
              placeholder="End Date"
              (dateChange)="selectDate($event.target, 'fromDate')"
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </div>
    </div>
  </form>

  <div class="listBox table-container">
    <div class="mat-elevation-z8">
      <table
        mat-table
        [dataSource]="dataSource"
        class="table table-hover responsive"
      >
        <!-- Number Column -->
        <ng-container matColumnDef="marque">
          <th mat-header-cell *matHeaderCellDef>Marque</th>
          <td mat-cell *matCellDef="let element; let index = index">
            {{element.marque || "N/A"}}
          </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef>Price</th>
          <td mat-cell *matCellDef="let element">{{ element.price }}</td>
        </ng-container>

        <!-- Quantity Column -->
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>Quantity</th>
          <td mat-cell *matCellDef="let element">{{ element.quantity }}</td>
        </ng-container>

        <!-- Deadline Column -->
        <ng-container matColumnDef="deadLineDate">
          <th mat-header-cell *matHeaderCellDef>DeadLine</th>
          <td mat-cell *matCellDef="let element">{{ element.deadline }}</td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef class="w-20">Status</th>
          <td mat-cell *matCellDef="let element">
            <div class="checkbox-wrapper-8">
              <input
                type="checkbox"
                id="cb3-8"
                class="tgl tgl-skewed"
                [checked]="element.status === 'available'"
                (change)="toggleStatus(element._id)"
              />
              <label
                for="cb3-8"
                [attr.data-tg-on]="
                  element.status === 'available' ? 'ON' : 'OFF'
                "
                data-tg-off="OFF"
                class="tgl-btn"
              ></label>
            </div>
          </td>
        </ng-container>

       <!-- Edit Column -->
       <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef style="width: 132px !important">
          Edit
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          style="width: 132px !important; text-align: center"
        >
          <div
            style="display: flex; flex-direction: column; align-items: center"
          >
            <button class="edit-button"  (click)="updateProduct(element)">
              <svg class="edit-svgIcon" viewBox="0 0 512 512">
                <path
                  d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"
                ></path>
              </svg>
            </button>
          </div>
        </td>
      </ng-container>

      <!-- Delete Column -->
      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef style="width: 132px !important">
          Delete
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          style="width: 132px !important; text-align: center"
        >
          <div
            style="display: flex; flex-direction: column; align-items: center"
          >
          <button class="delete-button" (click)="ConfirmDeleteProduct(element._id)">
            <svg class="delete-svgIcon" viewBox="0 0 448 512">
              <path
                d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"
              ></path>
            </svg>
          </button>
          </div>
        </td>
      </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>

      <div class="mt-3 d-flex justify-content-center">
        <mat-paginator
          (page)="onTableDataChange($event)"
          [length]="total"
          [pageSize]="filtration.limit"
          [pageSizeOptions]="pageSizeOptions"
          showFirstLastButtons
          aria-label="Select page"
        >
        </mat-paginator>
      </div>
    </div>
  </div>
</div>
